# 5. Swift 함수타입

이번 섹션에서는 함수형 프로그래밍의 근간이 되는 개념인 **함수 타입**에 대해 알아본다.


## 5-1. Function Type의 개념

### 함수는 1등 시민
함수에게는 어디든 갈 수 있는 권리가 있다

* 변수에 할당
* 매개변수로 사용
* 리턴타입으로 사용

처음 접하는 사람에게는 낯설지만 익숙해지면 복잡한 문제를 쉽게 풀 수 있는 방법이 된다.

### 우리가 알고 있는 타입들
* String, Double, Int 같은 기본 타입들
* Array, Dictionary, Set 같은 컬렉션 타입
* UIView, UILabel, UItableView 같은 코코아 클래스 타입

* **+ () -> Void 또는 (Int, Int) -> Int 같은 함수타입**

## 5-2. Function Type 사용
함수타입을 직접 정의해 보고 사용해 본다.

* addVAT 는 Double을 받아 Double을 리턴하는 함수
* couponDiscount 역시 Double을 받아 Double을 리턴하는 함수
* 두 함수는 함수 시그너쳐 (함수의 형식 선언부)가 같다

* additional 이라는 변수에는 addVAT나 couponDiscount 함수가 들어갈 수 있다.
* finalPrice 함수는 두 개의 매개변수를 받는데, 그 중 하나는 Double 타입이며, 다른 하나는 Double을 받아서 Double을 리턴하는 함수이다.




## 5-3. Closure 소개 

클로저는 1등시민으로 사용가능한 독립적인 코드조각이다.

자신이 정의된 환경을 캡처해서 저장한 뒤 **닫아버린다**고 해서 클로저라 부름.

*Objective-C의 Block이나 Java의 Lambda도 클로저의 일종이다.*

* **in** 이 사용되면 클로저.
* 하지만 in은 흔히 생략됨

기존에 제작된 함수를 클로저로 재정의해서 사용해 보자.


## 5-4. Closure 축약하기
클로저 사용에 익숙한 사람들은 축약된 형태의 클로저를 사용한다

앞서 만든 클로저를 축약해 봄으로서 클로저의 축약방식을 알아보자

###클로저 축약방식
* 매개변수 타입과 리턴타입은 추론 가능하므로 축약 가능
* 리턴이라는 지시어도 당연히므로 축약가능
* 매개변수의 이름은 내부적으로 사용하는 것이므로 축약하고 위치로 참조가능하므로 축약한다


## 5-5. 함수를 리턴하는 함수
다른 함수를 매개변수로 받거나 함수를 리턴타입으로 사용하는 함수를 고차함수라고 한다.

이번에는 함수를 리턴하는 함수를 사용해 본다.

###makeAdder 함수
* 함수안에서 함수를 생성해서 리턴한다
* makeAdder는 결과적으로 두개의 정수를 더하는 함수
* 하나의 정수를 받아서 , 정수를 받아 정수를 리턴하는 함수를 만들어 리턴한다
*  이런 식으로 여러개의 매개변수를 받는 함수를 쪼개서 하나의 매개변수를 받은 뒤 나머지 매개변수를 받는 함수를 리턴하는 함수를 커링(Currying)함수라고 한다


## 5-6. map 함수
map 함수는 배열과 함수를 매개변수로 받아서, 배열의 항목 하나하나에 매개변수로 받은 함수를 적용하는 함수이다.

###transactions 배열에 map적용하기
* 배열의 값은 Double
* 함수는 Double을 받아 Double을 리턴
* 배열의 값 각각에 함수를 적용한 결과 배열을 생성


## 5-7. filter 함수
filter 함수는 배열과 조건문이 있는 함수를 매개변수로 받아서, 배열의 하나하나에 함수의 조건문을 적용해서 통과하는 항목만으로 새로운 배열을 만드는 함수이다.

###transactions 배열에서 큰 값만 추려내기
* 거래금액이 500이상인 경우 true를 리턴하는 함수
* 적용시 조건에 맞는 항목만으로 이루어진 배열 생성

###meetingRooms 딕셔너리에 filter 적용하기
* 딕셔너리에 filter를 적용하면 튜플의 배열로 변환
* meetingRooms의 value는 튜플에서 .1로 접근 가능


## 5-8. sort 함수
sort 함수는 배열과 정렬 조건이 있는 함수를 매개변수로 받아서, 정렬방식에 적당하게 정렬된 새로운 배열을 만드는 함수이다.

*ascendant는 < 을 사용하며 작은 것부터 큰 순으로 정렬됩니다. 비디오에서처럼 >를 사용하면 descendant 정렬이 됩니다*

###transaction을 크기에 따라 정렬하기
* 두 개의 값을 비교하는 정렬 기준을 함수로 제공
* 적용시 조건에 따라 정렬된 배열 생성

###meetingRooms를 정원 순으로 정렬하기
* 딕셔너리에 sort를 적용하면 튜플의 배열로 변환
* meetingRooms의 value는 튜플에서 .1로 접근 가능


## 5-9. reduce 함수
하나의 값으로 수렴하도록 할 때 사용하는 함수. 배열과 병합에 사용하는 함수를 매개변수로 받아서 하나의 값을 결과로 리턴한다.

*개발 시 사용하는 많은 작업들은 reduce함수를 이용해 해결할 수 있다*

###transaction의 총합을 구하기
* base는 시작값이며 adder는 이번에 더할 값
* 축약시 병합원칙을 간단한 오퍼레이터로 제공할 수 있다

###Double 배열로 하나의 문자열 만들기
* 배열의 값을 이용해 하나의 문자열을 만들 때 reduce 함수 사용가능

###meetingRooms의 키,값을 이용해 하나의 문자열만들기
* 시작할 문자열을 base 값으로  제공
* 더해질 문자열을 adder로 제공



## 5-10. MeetingRooms 정렬하기1

고차함수를 이용해 MeetingRooms프로젝트의 섹션 순서와 섹션 내부에서의 로우 순서를 정렬해 보자.

###섹션정렬
* meetingRooms 딕셔너리는 문자열과 딕셔너리로 이루어져 있다.
* meetingRooms의 value에 해당하는 딕셔너리에는 회의실 이름과 정원으로 구성된 딕셔너리이다
* meetingRooms의 정렬을 위해 각 value 딕셔너리의 첫번째 아이템을 가져와서 sort 함수로 정렬하면 정원이 적은 MeetingRoom은 SeminarRoom 보다 항상 앞에 온다


## 5-11. MeetingRooms 정렬하기2

###섹션내 회의실 정렬
* 정렬된 meetingRooms 에서 섹션 내부의 값을 정렬한 orderedCategoryValue를 sort 함수를 이용해 정렬한다
* 자주 사용하는 orderedMeetingRooms를 별도의 함수로 묶어낸다