# 6. 계층적 네비게이션
이번 파트에서는 씬을 전환하는 기본적인 방법을 배웁니다. 씬은 화면의 기본 단위이며, 사용자는 앱에서 제공하는 많은 씬들 사이를 이동해가면 작업하게 됩니다.
iOS 앱은 전형적인 씬 구조를 가지고 있으므로, 이번 시간을 통해 기본적인 씬 구성방법을 알아보고 실습해 보겠습니다.

## 6-1. 뷰 컨트롤러 개요

### 바람직한 iOS 앱의 뷰 구조
* 윈도우
	* 뷰 컨트롤러 1
		* 뷰
	* 뷰 컨트롤러 2
		* 뷰

위에서 뷰 컨트롤러 1과 뷰 컨트롤러 2를 연결해 주는 게 네비게이션 컨트롤러 같은 컨테이너 컨트롤러

		
### 컨테이너 컨트롤러
실제로 화면에 내용을 표시하지는 않으면서 내용을 표시하는 컨텐트 컨트롤러들간의 전환을 관리하는 컨트롤러

* 네비게이션 컨트롤러
* 탭 바 컨트롤러
* 페이지 컨트롤러 등


## 6-2. 네비게이션과 탭을 가진 뷰 구조잡기

###컨테이너 컨트롤러에 임베드하기
* 현재의 뷰 컨트롤러를 네비게이션 컨트롤러에 의해 관리받도록 하려면
* 메뉴 바에서 Editor > Embed In > Navigation Controller
* 현재의 뷰 컨트롤러는 네비게이션 컨트롤러의 류트 뷰 컨트롤러가 된다

###탭 바 컨트롤러에 임베드하기
* 현재의 뷰 컨트롤러를 탭 바 컨트롤러에 의해 관리받도록 하려면
* 메뉴 바에서 Editor > Embed In > Tab Bar Controller
* 두 번째 연결부터는 탭 바 컨트롤러에서 ctrl-드래그로 view controllers 연결

###네비게이션 아이템과 탭 바 아이템
뷰 컨트롤러가 

* 네비게이션 컨트롤러에 묶여 있으면 네비게이션 바에 올리는 네비게이션 아이템을 가짐
* 탭 바 컨트롤러에 묶여 있는 첫 번째 뷰 컨트롤러라면 탭 바에 올리는 탭 바 아이템을 가짐

## 6-3. 네비게이션 컨트롤러
계층적인 정보를 파고 들어가서 정보를 표시하는 씬 구조를 잡고 싶다면 네비게이션 컨트롤러를 사용한다.

###네비게이션 컨트롤러
* 네비게이션 바 영역을 관리
* 아래쪽 빈 공간을 관리
* 세그웨이 동작 시 내부적으로는 pushViewController:animated: 함수가 호출되어 네비게이션이 일어남
* Back 버튼을 누르면 popViewController:animated: 함수를 통해 이전의 뷰로 돌아감


###네비게이션 스택
* 네비게이션은 뷰 컨트롤러들의 스택
* root view controller가 가장 아래에 깔려있고 그 위로 뷰 컨트롤러들이 push되는 구조
* pop을 하면 스택에서 빠져나간 뷰 컨트롤러는 메모리에서 사라짐

## 6-4. 네비게이션 구현 - 모델클래스

###네비게이션 흐름 잡기
* 첫번째 뷰에서는 지점의 목록이 나옴 (UITableViewController)
* 지점을 선책하면 서비스의 목록이 나옴 (UITableViewController)
* 서비스를 선택하면 서비스 아이템이 나옴 (UITableViewController)
* 전체는 Navigation Controller 에 묶여 있음


###모델클래스 만들기
* 지점의 정보를 가지는 Branch 클래스
* 지점별 서비스 정보를 가지는 Service 클래스
* 서비스의 상세 항목을 표시하는 Item 클래스

*Item은 코드 간략화를 위해 MeetingRoom 이라는 구체화된 클래스 사용*

## 6-5. 네비게이션 구현 - 뷰컨트롤러 준비
각각의 씬은 테이블 뷰 컨트롤러로 구성되어 있으므로 테이블 뷰를 표시하기 위해서는 데이터 소스 프로토콜을 준수해야 한다. 각각의 씬을 담당할 뷰 컨트롤러를 UITableViewController의 서브클래스로 생성하자.

###각각의 씬 관리자 설정
* File>New File> Cocoa Touch 선택, UITableViewController를 서브클래스
* 스토리보드에서 씬을 관리하는 뷰 컨트롤러로 지정
* 각각의 씬에 표시할 내용을 데이터소스 프로토콜로 제공


## 6-6. 네비게이션 구현 - 세그웨이로 값 넘기기
테이블 셀을 선택하면 선택한 항목에 대한 자세한 정보가 표시된다. 이를 위해 현재의 뷰 컨트롤러에서 보다 자세한 뷰 컨트롤러로 사용자가 선택한 항목의 정보를 전달해야 한다.

###세그웨이가 준비되면
* prepareForSegue: 함수는 사용자의 선택에 의해 다음 단계로 진행되는 세드웨이가 준비되었을 때 호출된다
* 세그웨이가 준비되었다는 것은 목적지 뷰 컨트롤러가 메모리에 올라가고 접근 가능한 상태라는 의미이다
* 그러므로 이 때 목적지 세그웨이로 선택한 항목을 전달할 수 있다.

## 6-7. 네비게이션 구현 - 네비게이션 아이템
네비게이션의 단계에 뷰 컨트롤러가 사용되면, 즉 네비게이션 스택에 뷰 컨트롤러가 top으로 올라가면 뷰 컨트롤러가 가지고 있는 네이게이션 아이템이 네비게이션 바를 채우게 된다.

###네비게이션 아이템은

* 배열임 - left 바 버튼 아이템, 타이틀 뷰, right 바 버튼 아이템 으로 구성
* 이 뷰로 돌아오기 위한 백 버튼에 표시할 이름 지정 가능
* 테이블 뷰에는 UIView를 추가한 뒤 원하는 뷰를 구성가능
* 타이틀은 네비게이션 아이템의 타이틀이 없으면 뷰 컨트롤러의 타이틀을 자동으로 사용

## 6-8. 네비게이션 구현 - 네비게이션 정리
지금까지 작업한 네비게이션을 정리해 보자.

* Serveice를 표시하는 뷰는 Branch를 표시하는 뷰로부터 하나의 Branch 오브젝트를 세그웨이를 통해 받아와서 표시한다
* MeetingRoom을 표시하는 뷰는 Service를 표시하는 뷰로부터 하나의 Service를 세그웨이를 통해 받아와서 그 아이템을 표시한다.


## 6-9. 탭 바 구현
탭바는 화면 아래쪽에서 연관성 없이 분리된 데이터 영역(컨텍스트)에 접근하기 위해 사용한다.

*탭 바 컨트롤러에 연결되는 순서대로 탭 바에 아이템이 올라갑니다*

### 탭바 아이템
* 아이콘은 1x에서 15pt, 2x 에서 50pt
* 컬러정보는 실행시 적용안됨
* 이름과 아이콘 입력 가능. 
* 위치 조정 가능


## 6-10. Bottom 영역의 바들
탭 바와 툴바는 화면의 아래쪽을 배타적으로 공유하고 있다.
화면의 아래쪽에 탭 바와 툴바가 함께 나올 순 없지만 상황에 따라 탭 바와 툴바를 나타나게 할 수 있다.

###탭 바
* 서로 다른 컨텍스트간의 전환을 위한 바
* 최상위 뷰에서는 탭의 전환을 위해 반드시 탭 바가 나타나야 하지만 네비게이션의 단계로 들어가면 툴바의 표시를 위해 숨길 수 있다.

### 툴바
* 네비게이션 바의 연장. 네비게이션 바에 올릴 수 없는 바 버튼 아이템을 툴바에 올려서 사용할 수 있다.
* 스와이프하거나 탭 했을 때 툴바가 사라지고 나타나게 할 수 있다.

## 6-11. 탭 바 더 알아보기
탭을 통해 제공해야 하는 씬이 많으면 (아이폰 기준 5개 이상) 자동으로 more (...) 버튼이 생성되고 탭바에 올라가 있지 않은 씬에 접근할 수 있는 뷰가 제공된다.

###탭 바의 more 버튼
* 5개 이상의 탭을 연결하면 자동으로 more 버튼 생성
* more 버튼을 누르면 숨겨진 탭들에 접근 가능
* 추가 탭 뷰에서 edit 버튼을 누르면 탭 바에 올라갈 항목들을 편집할 수 있다

