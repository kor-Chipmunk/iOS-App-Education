# 7. 모달 컨텍스트
모달 컨텍스트는 지금 당장 처리해야 하는 작은 작업에 집중하도록 하는 씬 제공 방식이다. 모달 컨텍스트를 잘 활용하면 사용자가 복잡한 작업을 단계별로 해결하는 데 도움을 줄 수 있다.


## 7-1. 얼러트와 액션시트

###모달 컨텍스트
* 모드 별 작업영역
* 추가, 편집, 공유 등 작은 단위 작업을 위한 별도의 화면 공간 제공
* 하나의 작업에 집중하도록 한다
* 모달 컨텍스트를 중첩해서 사용할 수 있다


얼러트와 액션 시트도 모달의 일종이다.
###UIAlertController
* 얼러트와 액션 시트를 동시에 제공하기 위한 클래스
* UIAlertAction을 통해 버튼과 각각의 버튼을 선택했을 때 수행할 작업을 추가
* 얼러트는 비정상적인 동작을 사용자에게 경고하기 위해 사용
* 액션시트는 정상적인 동작 내에서 사용자에게 추가 입력을 받기 위해 사용

## 7-2. 테이블 셀 액세서리
테이블 뷰 셀에는 액세서리 영역이 있으며 용도에 맞게 사용하면 사용자에게 보다 친절한 UI를 만들 수 있다.

액세서리 영역에는 

* 디스클로저 인디케이터
* 디테일 디스클로저
* 티테일
* 체크마크

를 사용할 수 있다.

###디스클로저 인디케이터
* 셀을 선택하면 다음에 보여줄 자세한 정보를 담은 씬이 **있다**


###디테일 디스클로저
* 셀을 선택하면 다음에 보여줄 자세한 정보를 담은 씬이 있으며
* 디테일 버튼을 누르면 보여줄 **항목의 메타데이터**를 담은 씬이 있다

## 7-3. 모달 올리고 내리기
모달은 현재의 작업영역(베이스 또는 프리젠팅 뷰)에서 분리해서 처리할 작업을 위한 뷰를 제공한다.

###모달 컨텍스트가 올라오면
* 프리젠팅 뷰에 네비게이션과는 관련이 없다
* 모달에서도 네비게이션이 필요하다면 네비게이션 컨트롤러를 따로 붙여야 한다

* 모달을 내릴 땐 모달로 제공된 뷰 컨트롤러에서 dismissViewControllerAnimated:completion: 함수를 self에 호출하면 모달이 내려간다

## 7-4. 모달로값추가하기_스토리보드준비
모달을 제공하는 경우는, 모달을 통해 

* 새로운 값을 추가하거나
* 기존의 값을 편집하고자 할때

이므로, 모달을 통해 새로운 값을 추가하는 구현을 해 보자.

이 것을 위해 MeetingRoom 씬에 예약 현황을 보여주고 새로운 예약을 할 수 있도록 하는 UI를 만들자.


## 7-5. 모달로값추가하기_예약클래스-리스트뷰구현
예약 현황을 보여주는 씬을 구현해 보자.

###두개의 뷰 컨트롤러 클래스 추가
* 예약현황을 보여주는 ReservationListViewController
* 새로운 예약을 추가하기 위한 ReserveRoomViewController
* ReserveRoomViewController에는 아울렛 연결해서 UI에 입력한 값을 읽어온다

###Reservation 모델 만들기
* 예약에 대한 추상화.
* MeetingRoom 클래스에 Reservation을 가지는 배열 추가


## 7-6. Presenting 관계를 이용해 추가하기-1
모달을 내리면서 추가/수정된 오브젝트를 반영하려면 모달로 제공된(프리젠티드) 뷰 컨트롤러에서 모달을 올려준(프리젠팅) 뷰 컨트롤러로 데이터를 넘겨야 한다.

***예전의 방식인 프리젠팅 관계를 이용한 추가를 먼저 해 본 뒤, Unwind 세그웨이를 통해 우아하게 구현하는 법을 알아보겠다***

###새로운 아이템을 리스트에 추가하는 함수
* 모달을 통해 생성된 새로운 예약을 받아들일 수 있는 함수
* 예약 리스트를 보여주는 ReservationListViewController에 구현

### 새로운 아이템을 만드는 함수
* UI에 입력된 값을 읽어서 새로운 Reservation 오브젝트를 만든다


### 문자열 구분하기
* String 의 characters 로 CharacterView를 얻은 뒤
* split()함수를 이용해 ","를 기준으로 분리한 뒤
* String.init 함수를 map 으로 적용해서 각각의 문자열로 만든다

## 7-7. Presenting 관계를 이용해 추가하기-2

### 프리젠팅 뷰 찾기
* 아래쪽에서 모달로 올려준 뷰 컨트롤러가 프리젠팅 뷰 컨트롤러
* 하지만 네비게이션 컨트롤러에 묶여 있다면 네비게이션 컨트롤러가 프리젠팅 뷰 컨트롤러
	* 네비게이션 컨트롤러의 top 뷰 컨트롤러를 찾아야 함
* 또한 탭 바 컨트롤러에 묶여 있다면 탭 바 컨트롤러가 프리젠팅 뷰 컨트롤러
	* 선택된 탭 바 아이템을 찾아야 함
	* 선택된 뷰 컨트롤러가 네비게이션 컨트롤러일 가능성 높음


## 7-8. Unwind세그웨이를이용해추가하기
Unwind 세그웨이는 지정한 곳으로 돌려보내는 역할을 하는 세그웨이이다.

### Unwind 세그웨이를 이용하는 법
* 돌아갈 목적지가 될 씬의 뷰 컨트롤러가 세그웨이 함수를 구현해야 함
* 스토리보드상의 Exit에 액션 연결을 시도하면 스토리보드 내의 모든 세그웨이를 함수를 보여줌
* 돌아갈 뷰 컨트롤러의 세그웨이 함수를 지정
* prepareForSegue에서 destinationViewController를 접근하면 뷰 계층에 상관없이 목적지 뷰 컨트롤러에 접근할 수 있음


